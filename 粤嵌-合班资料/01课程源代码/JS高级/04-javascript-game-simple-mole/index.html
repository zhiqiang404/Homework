<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="stage">
    <div class="hole"></div>
    <div class="hole"></div>
    <div class="hole"></div>
    <div class="hole"></div>
    <div class="hole"></div>
    <div class="hole"></div>
    <div class="hole"></div>
    <div class="hole"></div>
    <div class="hole"></div>
</div>
<p class="score">Score: 0</p>
<p class="lost">Lost：0</p>
<style>
    .stage {
        width: 300px;
        height: 300px;
        margin: 0 auto;
        background: lightblue;
        cursor: cell;
    }

    .stage .hole {
        width: 100px;
        height: 100px;
        background: #c4c9ca;
        float: left;
        border-radius: 50%;
        position: relative;
    }

    .stage .hole span {
        width: 60px;
        height: 60px;
        background: orange;
        display: inline-block;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: auto;
    }
</style>

<script>
    var holes = document.querySelectorAll('.hole');
    var score = 0;
    var lost = 0;
    var moles = [];

    var Mole = function () {
        this.node = document.createElement('span');
        this.index = Math.floor(Math.random() * holes.length);
        this.hp = 2;
    };
    Mole.prototype.draw = function () {
            holes[this.index].appendChild(this.node);
            // 添加点击事件
            this.node.onclick = function () {
                score++;
                document.querySelector('p.score').innerText = 'Score: ' + score;
                this.parentNode.removeChild(this);
                moles.splice(this.index, 1);
            }
    };
    Mole.prototype.checkHole = function () {
        return holes[this.index].hasChildNodes();
    };

    setInterval(function () {
        do {
            var newMole = new Mole();
        } while (newMole.checkHole());

        // 创建的每个地鼠经过一段时间之后就消失
        for (var j = 0; j < moles.length; j++) {
            moles[j].hp--;
            if (moles[j].hp <= 0) {
                moles[j].node.parentNode.removeChild(moles[j].node);
                moles.splice(j,1);
                lost++;
                document.querySelector('p.lost').innerHTML = 'Lost: ' + lost;
            }
        }
        newMole.draw();
        moles.push(newMole);
    }, 800)
</script>
</body>
</html>